<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chi tiáº¿t bÃ i Ä‘Äƒng</title>
    <link rel="stylesheet" href="CSS/baidang.css" /><link rel="stylesheet" href="CSS/SanPham.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<link rel="stylesheet" href="CSS/index.css" />
  </head>
  <header class="main-header">
  <div class="top-header">
    <div class="header-left">
      <a href="index.html"><img src="IMG/logo.png" alt="logo" class="logo-hago"/></a>
    </div>

    <div class="search-container">
      <span class="search-icon">ğŸ”</span>
      <input class="searchbox" type="search" placeholder="TÃ¬m kiáº¿m..." />
    </div>

    <div class="right-icons">
      <a href="HTML/LienHe.html" class="icon-link"><img src="IMG/HAGOLH.png" /><span>LiÃªn há»‡</span></a>
      <a href="GioHang.html" class="icon-link"><img src="IMG/HAGOGH.png" /><span>Giá» hÃ ng</span><span class="cart-count"></span></a>
      <a href="HTML/dangnhap.html" class="icon-link"><img src="IMG/HAGOTK.png" /><span id="Accountchecker">ÄÄƒng nháº­p/Ä‘Äƒng kÃ½</span></a>
    </div>
  </div>

    </header>

  <main id = "ContentPost">
    
  </main>
<main class="form-container">
  <form id="postForm">
    <label for="title">TiÃªu Ä‘á» bÃ i viáº¿t:</label>
    <input type="text" id="title" name="title" required />

    <label for="image">áº¢nh minh há»a (chá»n tá»« mÃ¡y):</label>
    <input type="file" id="image" name="image" accept="image/*" />

    <label for="content">Ná»™i dung bÃ i viáº¿t:</label>
    <textarea id="content" name="content" rows="10" required></textarea>

    <button type="submit">ÄÄƒng bÃ i</button>
  </form>

  <div id="successMessage" style="display: none;">
    âœ… BÃ i viáº¿t Ä‘Ã£ Ä‘Æ°á»£c lÆ°u! Báº¡n cÃ³ thá»ƒ xem láº¡i trong danh sÃ¡ch bÃ i Ä‘Äƒng.
  </div>
</main>


  </body>
   <footer>
  <div class="footer-container">
    <div class="footer-section">
      <h2>Hago Tree</h2>
      <p>ChuyÃªn cÃ¢y cáº£nh nhÃ¢n táº¡o tháº©m má»¹ â€“ Äáº¹p bá»n vá»¯ng theo thá»i gian.</p>
    </div>
    <div class="footer-section">
      <h2>LiÃªn há»‡</h2>
      <p><i class="fas fa-map-marker-alt"></i> Háº»m 1581, ÄÆ°á»ng BÃ¹i Há»¯u NghÄ©a, PhÆ°á»ng TÃ¢n Háº¡nh, TP. BiÃªn HÃ²a, Äá»“ng Nai</p>
      <p><i class="fas fa-envelope"></i> HagoTree@gmail.com</p>
      <p><i class="fas fa-phone-alt"></i> 0968 123 456</p>
    </div>
    <div class="footer-section">
      <h2>Theo dÃµi</h2>
      <div class="footer-social">
        <a href="https://www.facebook.com/HagoTreee" target="_blank" aria-label="Facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://zalo.me/yourZaloID" target="_blank" aria-label="Zalo">
          <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Icon_of_Zalo.svg" alt="Zalo" class="zalo-icon">
        </a>
      </div>
      <p style="margin-top:8px;font-size:13px;">Káº¿t ná»‘i vá»›i chÃºng tÃ´i Ä‘á»ƒ nháº­n Æ°u Ä‘Ã£i & tin tá»©c má»›i nháº¥t!</p>
    </div>
  </div>
  <div class="footer-quote">
    <em>â€œCÃ¢y cáº£nh giáº£, cáº£m xÃºc tháº­t.â€</em>
  </div>
  <div class="footer-bottom">
    &copy; 2025 Hago Tree. All rights reserved.
  </div>
</footer>
     <script>
       
const contentform = document.getElementById("postForm");

contentform.addEventListener("submit", async (e) => {
  e.preventDefault();

  const contentformdata = Object.fromEntries(new FormData(contentform).entries());

  const imageFile = contentform.image.files[0];

  if (imageFile) {
    try {
      contentformdata.image = await convertToBase64(imageFile); 
    } catch (err) {
      console.error("Lá»—i chuyá»ƒn áº£nh:", err);
      alert("KhÃ´ng thá»ƒ xá»­ lÃ½ áº£nh!");
      return;
    }
  } else {
    contentformdata.image = "";
  }

  fetch("https://server-web-hagotree.glitch.me/upload-post", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(contentformdata),
  })
    .then((res) => {
      if (res.ok) {
        document.getElementById("successMessage").style.display = "block";
        contentform.reset();
      } else {
        alert("Lá»—i khi Ä‘Äƒng bÃ i viáº¿t!");
      }
    })
    .catch((err) => {
      console.error(err);
      alert("Lá»—i káº¿t ná»‘i Ä‘áº¿n server.");
    });
});

function convertToBase64(file) {  //chuyá»ƒn áº£nh sang dáº¡ng byte64
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result); 
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}


     </script>
     <script src="JS/baidang.js"></script>
         <script src="JS/index.js"></script>
   <script src="/JS/Giohang.js"></script>
</html>
