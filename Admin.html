<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>g</title>
    <link rel="stylesheet" href="CSS/baidang.css" /><link rel="stylesheet" href="CSS/SanPham.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      if (sessionStorage.getItem("adminLoggedIn") !== "true") {
  alert("Bạn chưa đăng nhập hoặc phiên đã hết.");
  const email = prompt("Username");
  const password = prompt("Key");
  fetch("https://dssc.hagotree.site/admin", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      loginEmail: email,
      loginPassword: password
    })
  })
    .then((res) =>
      res.json().then((data) => ({
        status: res.status,
        body: data
      }))
    )
    .then(({ status, body }) => {
      if (status === 202) {
        sessionStorage.setItem("adminLoggedIn", "true");
        alert("Đăng nhập thành công!");
      } else {
        alert("Sai email hoặc mật khẩu");
         window.location.href = "/Admin.html";
      }
    })
    .catch((err) => {
      console.error("Lỗi:", err);
      alert("Lỗi kết nối tới server");
    });

}
// Hiệu ứng ripple cho nút
document.querySelectorAll('.section-toggle-btn, .form-container button[type="submit"]').forEach(btn => {
  btn.addEventListener('click', function (e) {
    const circle = document.createElement('span');
    circle.classList.add('ripple');
    const rect = btn.getBoundingClientRect();
    circle.style.left = `${e.clientX - rect.left}px`;
    circle.style.top = `${e.clientY - rect.top}px`;
    btn.appendChild(circle);
    setTimeout(() => circle.remove(), 500);
  });
});

// Hiện/ẩn nội dung và đổi tên nút
[
  {btn: 'toggleDonHang', container: 'donHangContainer', label: ['Hiện đơn hàng', 'Ẩn đơn hàng']},
  {btn: 'toggleGiaoDich', container: 'GiaoDichContainer', label: ['Hiện giao dịch', 'Ẩn giao dịch']},
  {btn: 'toggleLienHe', container: 'LienHeContainer', label: ['Hiện liên hệ', 'Ẩn liên hệ']},
  {btn: 'toggleFeedBack', container: 'FeedBackContainer', label: ['Hiện phản hồi', 'Ẩn phản hồi']},
  {btn: 'toggleBaiViet', container: 'BaiVietContainer', label: ['Hiện bài viết', 'Ẩn bài viết']},
].forEach(({btn, container, label}) => {
  const btnEl = document.getElementById(btn);
  const contEl = document.getElementById(container);
  if (btnEl && contEl) {
    btnEl.textContent = label[0];
    contEl.style.display = 'none';
    btnEl.addEventListener('click', () => {
      if (contEl.style.display === 'none' || contEl.style.display === '') {
        contEl.style.display = 'block';
        btnEl.textContent = label[1];
        contEl.animate([{opacity:0},{opacity:1}],{duration:300,fill:'forwards'});
      } else {
        contEl.animate([{opacity:1},{opacity:0}],{duration:200,fill:'forwards'}).onfinish = () => {
          contEl.style.display = 'none';
          btnEl.textContent = label[0];
        };
      }
    });
  }
});

    </script>
<link rel="stylesheet" href="CSS/admin.css" />
<style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      padding: 8px;
      border: 1px solid #ccc;
    }
    th {
      background: #f2f2f2;
    }
  </style>
  </head>
  <body>

    <div class="admin-layout">
  <nav class="admin-sidebar" id="adminSidebar">
  <div class="sidebar-header">
    <button class="sidebar-toggle" id="sidebarToggle">
      <i class="fas fa-bars"></i>
    </button>
    <span class="sidebar-title">Menu</span>
  </div>
  <ul>
    <li data-section="donHangSection" class="active">
      <i class="fas fa-receipt"></i> <span>Đơn hàng</span>
    </li>
    <li data-section="giaoDichSection">
      <i class="fas fa-check-circle"></i> <span>Xác nhận đơn</span>
    </li>
    <li data-section="lienHeSection">
      <i class="fas fa-envelope"></i> <span>Liên hệ</span>
    </li>
    <li data-section="feedbackSection">
      <i class="fas fa-comment-dots"></i> <span>Feedback</span>
    </li>
    <li data-section="baiVietSection">
      <i class="fas fa-newspaper"></i> <span>Bài viết</span>
    </li>
    <li data-section="dangSanPhamSection">
      <i class="fas fa-plus-square"></i> <span>Đăng sản phẩm mới</span>
    </li>
    <li data-section="voucherSection">
      <i class="fas fa-ticket-alt"></i> <span>Voucher</span>
    </li>
  </ul>
</nav>
  <div class="admin-main-content">
  <section class="section-card admin-section-content" id="donHangSection">
    <div class="section-header">
      <h3 class="section-title">ĐƠN HÀNG</h3>
    </div>
    <div id="donHangContainer" class="section-table-wrap">
      <div id="DonHangList"></div>
    </div>
  </section>
  <section class="section-card admin-section-content" id="giaoDichSection">
    <div class="section-header">
      <h3 class="section-title">XÁC NHẬN ĐƠN</h3>
    </div>
    <div id="GiaoDichContainer">
      <form id="xndform" class="form-container">
        <label for="MaGiaoDich">MÃ GIAO DỊCH CẦN THỰC HIỆN</label>
        <input type="text" id="MaGiaoDich" name="MaGiaoDich" required />
        <select id="chonxacnhan" required>
          <option selected value="xn">Xác nhận đơn</option>
          <option value="ht">Đã hoàn thành</option>
          <option value="hd">Hủy đơn</option>
          <option value="xd">Xóa đơn</option>
          <option value="tg">Thời gian giao đơn</option>
        </select>
        <button type="submit">XÁC NHẬN ĐƠN</button>
      </form>
    </div>
  </section>
  <section class="section-card admin-section-content" id="lienHeSection">
    <div class="section-header">
      <h3 class="section-title">LIÊN HỆ</h3>
    </div>
    <div id="LienHeContainer" class="section-table-wrap">
      <div style="max-height: 300px; overflow-y: auto;">
        <table id="LienHeTable">
          <thead>
            <tr>
              <th>Họ tên</th>
              <th>Email</th>
              <th>Điện thoại</th>
              <th>Lời nhắn</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>
  <section class="section-card admin-section-content" id="feedbackSection">
    <div class="section-header">
      <h3 class="section-title">FeedBack Sản Phẩm</h3>
    </div>
    <div id="FeedBackContainer" class="section-table-wrap">
      <div style="max-height: 300px; overflow-y: auto;">
        <table id="FeedBackTable">
          <thead>
            <tr>
              <th>Sản phẩm</th>
              <th>Lời nhắn</th>
              <th>Email người gửi</th>
              <th>Ảnh</th>
              <th>Sao</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>
  <section class="section-card admin-section-content" id="baiVietSection">
    <div class="section-header">
      <h3 class="section-title">Bài viết</h3>
    </div>
    <div id="BaiVietContainer">
      <div style="max-height: 500px; overflow-y: auto;">
        <iframe style="border:none;" src="https://mmqstore.io.vn/wp/posthaogtree" height="500px" width="100%"></iframe>
      </div>
    </div>
  </section>
  <section class="section-card admin-section-content" id="dangSanPhamSection">
    <h3 class="section-title">Đăng sản phẩm mới</h3>
    <form id="postForm" enctype="multipart/form-data" class="form-container">
      <label for="title">Tên sản phẩm:</label>
      <input type="text" id="title" name="title" required />
      <label for="image">Ảnh minh họa:</label>
      <div class="custom-file-input">
  <label for="image" class="file-label">
    <span id="fileLabelText">Chọn tệp</span>
    <input type="file" id="image" name="image" accept="image/*" />
  </label>
</div>
      <label for="cost">Giá sản phẩm:</label>
      <input type="number" id="cost" name="cost" required />
      <label for="content">Miêu tả sản phẩm:</label>
      <textarea id="content" name="content" rows="10" required></textarea>
      <label for="tag_product">Chọn tag cho sản phẩm:</label>
      <select id="tag_product" name="tag" required>
        <option selected value="caycanhnhantao">Cây cảnh nhân tạo</option>
        <option value="chaucay">Chậu cây</option>
        <option value="combochaucay">Combo cây chậu</option>
        <option value="caycanh">Cây cảnh</option>
      </select>
      <button type="submit">Đăng bài</button>
    </form>
    <div id="successMessage" style="display: none;">
      Bài viết đã được lưu! Bạn có thể xem lại trong danh sách bài đăng.
    </div>
  </section>
  <section class="section-card admin-section-content" id="voucherSection">
  <h3 class="section-title">Quản lý Voucher</h3>
  <div class="voucher-btn-group">
    <button class="voucher-tab-btn" data-voucher-tab="info">Thông tin cơ bản</button>
    <button class="voucher-tab-btn" data-voucher-tab="setup">Thiết lập mã giảm giá</button>
    <button class="voucher-tab-btn" data-voucher-tab="show">Hiển thị mã giảm giá</button>
  </div>
  <div class="voucher-tab-content" id="voucherTabInfo">
<form class="voucher-basic-form-unique">
  <h4 class="voucher-form-title-unique">Thông tin cơ bản</h4>
  <div class="voucher-row-inline-unique">
    <div class="voucher-col-inline-unique">
      <label for="voucherType">Loại mã</label>
      <div class="voucher-type-select-unique" id="voucherType">
       <div class="voucher-form-row-unique">
  <div class="voucher-type-card-group">
    <label class="voucher-type-card">
      <input type="radio" name="voucherType" value="shop" checked>
      <div class="voucher-type-card-content">
        <i class="fas fa-store"></i>
        <div>
          <strong>Voucher<br>toàn Shop</strong>
        </div>
      </div>
    </label>
    <label class="voucher-type-card">
      <input type="radio" name="voucherType" value="product">
      <div class="voucher-type-card-content">
        <i class="fas fa-tag"></i>
        <div>
          <strong>Voucher<br>theo từng sản phẩm</strong>
        </div>
      </div>
    </label>
    <div class="voucher-code-inline">
      <label for="voucherCode">Mã voucher</label>
      <div style="display:flex;align-items:center;">
        <input type="text" id="voucherCode" maxlength="5" value="YTV" />
        <span class="voucher-char-count">0/5</span>
      </div>
    </div>
  </div>
</div>
      </div>
    </div>
  </div>
  <div class="voucher-form-row-unique">
    <label for="voucherName">Tên chương trình giảm giá</label>
    <input type="text" id="voucherName" maxlength="100" />
    <span class="voucher-char-count">0/100</span>
    <div class="voucher-note">Tên Voucher sẽ không được hiển thị cho Người mua</div>
  </div>
  <div class="voucher-form-row-unique">
    <label>Thời gian sử dụng mã</label>
    <input type="datetime-local" style="margin-bottom:6px;">
    <input type="datetime-local">
  </div>
  <div class="voucher-form-row-unique voucher-checkbox-row-unique">
    <input type="checkbox" id="allowSaveBefore" />
    <label for="allowSaveBefore" class="voucher-checkbox-label-unique">Cho phép lưu mã trước Thời gian sử dụng</label>
  </div>
</form>
<button type="submit" class="voucher-save-btn-unique">Lưu thiết lập</button>
  </div>
  <div class="voucher-tab-content" id="voucherTabSetup" style="display:none">
    <form class="voucher-setup-form">
  <h4 class="voucher-form-title">Thiết lập mã giảm giá</h4>
  <div class="voucher-form-row">
    <label>Loại Voucher</label>
    <div class="voucher-radio-group">
      <label><input type="radio" name="voucherType" checked> Khuyến Mãi</label>
      </div>
  </div>
  <div class="voucher-form-row">
    <label>Loại giảm giá | Mức giảm</label>
    <div style="display: flex; gap: 8px;">
      <select>
        <option>Theo số tiền</option>
        <option>Theo %</option>
      </select>
      <input type="number" min="0" placeholder="đ" style="width:100px;">
    </div>
  </div>
  <div class="voucher-form-row">
    <label>Giá trị đơn hàng tối thiểu</label>
    <input type="number" min="0" placeholder="đ">
  </div>
  <div class="voucher-form-row">
    <label>Tổng lượt sử dụng tối đa</label>
    <input type="number" min="0" placeholder="">
    <div class="voucher-note">Tổng số Mã giảm giá có thể sử dụng</div>
  </div>
  <div class="voucher-form-row">
    <label>Lượt sử dụng tối đa/Người mua</label>
    <input type="number" min="1" value="1">
  </div>
</form>
<button type="submit" class="voucher-save-btn-unique">Lưu thiết lập</button>
  </div>
  <div class="voucher-tab-content" id="voucherTabShow" style="display:none">
    <form class="voucher-show-form">
  <h4 class="voucher-form-title">Hiển thị mã giảm giá và các sản phẩm áp dụng</h4>
  <div class="voucher-form-row">
    <label>Thiết lập hiển thị</label>
    <div class="voucher-radio-group">
      <label><input type="radio" name="showType" checked> Hiển thị nhiều nơi <i class="fas fa-question-circle"></i></label>
      <label><input type="radio" name="showType"> Chia sẻ thông qua mã Voucher <i class="fas fa-question-circle"></i></label>
    </div>
  </div>
  <div class="voucher-form-row">
    <label>Sản phẩm được áp dụng</label>
    <div class="voucher-product-applied">
      <span>Tất cả sản phẩm</span>
      <div class="voucher-note" style="color:#e69a00;">
        Trong các sản phẩm đã chọn có một số sản phẩm không được chạy khuyến mãi theo quy định của pháp luật hoặc đây là sản phẩm độc quyền dành cho thành viên. <a href="#">Tìm hiểu thêm</a>
      </div>
    </div>
  </div>
</form>
<button type="submit" class="voucher-save-btn-unique">Lưu thiết lập</button>
  </div>
</section>
</div>
  </div>
    <footer>
  <div class="footer-container">
    <div class="footer-section">
      <h2>Hago Tree</h2>
      <p>Chuyên cây cảnh nhân tạo thẩm mỹ – Đẹp bền vững theo thời gian.</p>
    </div>
    <div class="footer-section">
      <h2>Liên hệ</h2>
      <p><i class="fas fa-map-marker-alt"></i> Hẻm 1581, Đường Bùi Hữu Nghĩa, Phường Tân Hạnh, TP. Biên Hòa, Đồng Nai</p>
      <p><i class="fas fa-envelope"></i> HagoTree@gmail.com</p>
      <p><i class="fas fa-phone-alt"></i> 0947192590</p>
    </div>
    <div class="footer-section">
      <h2>Theo dõi</h2>
      <div class="footer-social">
        <a href="https://www.facebook.com/HagoTreee" target="_blank" aria-label="Facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://zalo.me/yourZaloID" target="_blank" aria-label="Zalo">
          <img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Icon_of_Zalo.svg" alt="Zalo" class="zalo-icon">
        </a>
      </div>
      <p style="margin-top:8px;font-size:13px;">Kết nối với chúng tôi để nhận ưu đãi & tin tức mới nhất!</p>
    </div>
  </div>
  <div class="footer-quote">
    <em>“Cây cảnh giả, cảm xúc thật.”</em>
  </div>
  <div class="footer-bottom">
    &copy; 2025 Hago Tree. All rights reserved.
</footer>
     <script>
const contentform = document.getElementById("postForm");
const xacnhanform = document.getElementById("xndform");
const thanhcongform = document.getElementById("dntcform");

contentform.addEventListener("submit", async (e) => {
  e.preventDefault();

  const formData = new FormData(contentform);
  fetch("https://dssc.hagotree.site/upload-post", {
    method: "POST",
    body: formData, 
  })
    .then((res) => {
      if (res.ok) {
        document.getElementById("successMessage").style.display = "block";
        contentform.reset();
      } else {
        alert("Lỗi khi đăng bài viết!");
      }
    })
    .catch((err) => {
      console.error(err);
      alert("Lỗi kết nối đến server.");
    });
});
xacnhanform.addEventListener("submit", function (e) {
  e.preventDefault();
  const xacnhanformdata = Object.fromEntries(new FormData(xacnhanform).entries()); 
  if(chonxacnhan.value=="xn"){
    fetch('https://dssc.hagotree.site/xac-nhan-don', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(xacnhanformdata) 
  })

  .then(async (response) => {
      console.log("Status:", response.status);
      const data = await response.json().catch(() => ({}));
      console.log("Response body:", data);

      if (response.status === 201) {
        alert("Xong");
      } else {
        alert("Có lỗi xảy ra, vui lòng thử lại.\n" + (data.message || ""));
      }
    })
    .catch((error) => {
      console.error("Fetch error:", error);
      alert("Lỗi kết nối tới server!");
    });
}

else if (chonxacnhan.value == "ht") {
  fetch("https://dssc.hagotree.site/xac-nhan-don-xong", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(xacnhanformdata),
  })
    .then(async (response) => {
      console.log("Status:", response.status);
      const data = await response.json().catch(() => ({}));
      console.log("Response body:", data);

      if (response.status === 201) {
        alert("Xong");
      } else {
        alert("Có lỗi xảy ra, vui lòng thử lại.\n" + (data.message || ""));
      }
    })
    .catch((error) => {
      console.error("Fetch error:", error);
      alert("Lỗi kết nối tới server!");
    });
}
else if (chonxacnhan.value == "tg") {
  const datattime = prompt("Nhập thời gian giao");

  const maGiaoDichx = document.getElementById("MaGiaoDich").value;

  const dataToSend = {
    thoiGianGiao: datattime,
    maGiaoDich: maGiaoDichx
  };

  fetch("https://dssc.hagotree.site/thoi-gian-giao", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(dataToSend),
  })
    .then(async (response) => {
      console.log("Status:", response.status);
      const data = await response.json().catch(() => ({}));
      console.log("Response body:", data);

      if (response.status === 201) {
        alert("Xong");
      } else {
        alert("Có lỗi xảy ra, vui lòng thử lại.\n" + (data.message || ""));
      }
    })
    .catch((error) => {
      console.error("Fetch error:", error);
      alert("Lỗi kết nối tới server!");
    });
}

  else if(chonxacnhan.value=="hd"){
      fetch('https://dssc.hagotree.site/huy-don', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(xacnhanformdata)  
      })

      .then(async (response) => {
          console.log("Status:", response.status);
          const data = await response.json().catch(() => ({}));
          console.log("Response body:", data);

          if (response.status === 201) {
            alert("Xong");
          } else {
            alert("Có lỗi xảy ra, vui lòng thử lại.\n" + (data.message || ""));
          }
        })
        .catch((error) => {
          console.error("Fetch error:", error);
        });
  }
   else if(chonxacnhan.value=="xd"){
      fetch('https://dssc.hagotree.site/xoa-don', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(xacnhanformdata)  
        })
            .then(async (response) => {
            console.log("Status:", response.status);
            const data = await response.json().catch(() => ({}));
            console.log("Response body:", data);

            if (response.status === 201) {
              alert("Xong");
            } else {
              alert("Có lỗi xảy ra, vui lòng thử lại.\n" + (data.message || ""));
            }
          })
          .catch((error) => {
            console.error("Fetch error:", error);
            alert("Lỗi kết nối tới server!");
          });
      }

})
function convertToBase64(file) {  
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result); 
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

     </script>

     <script>
let cityData = [];


fetch("https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json")
  .then(response => response.json()) 
  .then(data => {
    cityData = data;
    loadOrders(); 
  })
  .catch(error => {
    console.error("Lỗi khi tải dữ liệu tỉnh thành:", error);
  });

function getDiaChi(dayString) {
  if (!dayString || !dayString.includes(",")) return "Không rõ";

  const [wardId, districtId, cityId] = dayString.split(",");

  const city = cityData.find(c => c.Id === cityId);
  if (!city) return "Không rõ thành phố";

  const district = city.Districts.find(d => d.Id === districtId);
  if (!district) return `${city.Name}`;

  const ward = district.Wards.find(w => w.Id === wardId);
  if (!ward) return `${district.Name}, ${city.Name}`;

  return `${ward.Name}, ${district.Name}, ${city.Name}`;
}

fetch("https://dssc.hagotree.site/lh")
    .then(res => res.json())
    .then(data => {
      const tbody = document.querySelector("#LienHeTable tbody");
      data.forEach(lienhe => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${lienhe.name}</td>
          <td>${lienhe.email}</td>
          <td>${lienhe.phone}</td>
          <td>${lienhe.message}</td>
        `;
        tbody.appendChild(row);
      });
    })
    .catch(err => {
      console.error("Lỗi khi lấy đơn hàng:", err);
      document.body.innerHTML += "<p style='color:red;'>Không thể tải liên hệ!</p>";
    });
fetch("https://dssc.hagotree.site/fb")
    .then(res => res.json())
    .then(data => {
      const tbody = document.querySelector("#FeedBackTable tbody");
      data.forEach(feedbackx => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${feedbackx.product}</td>
          <td>${feedbackx.feedback}</td>
          <td>${feedbackx.email}</td>
          <td><img src="https://dssc.hagotree.site/${feedbackx.image}" alt="Ảnh Feedback" style="max-width:200px;"></td>
          <td>${feedbackx.star}</td>
        `;
        tbody.appendChild(row);
      });
    })
    .catch(err => {
      console.error("Lỗi khi lấy đơn hàng:", err);
      document.body.innerHTML += "<p style='color:red;'>Không thể tải liên hệ!</p>";
    });
function loadOrders() {
  fetch("https://dssc.hagotree.site/dh")
    .then(res => res.json())
    .then(data => {
      const listDiv = document.getElementById("DonHangList");
      listDiv.innerHTML = ""; // Xóa cũ nếu có
      data.forEach(order => {
        const donHangParsed = JSON.parse(order.DonHang || "[]");
        const productList = donHangParsed.map(p => `
          <div>
            <strong>${p.title}</strong> - ${p.cost.toLocaleString()}₫ × ${p.quantity}
            <br><img src="IMG/${p.image}" width="50">
          </div>
        `).join("");

        const diaChiGoc = getDiaChi(order.DiaChiTinhThanh);

        // Tạo bảng dọc cho mỗi đơn hàng
        const table = document.createElement("table");
        table.className = "order-vertical-table";
        table.innerHTML = `
          <tr><th>Họ tên</th><td>${order.Name}</td></tr>
          <tr><th>Email</th><td>${order.email}</td></tr>
          <tr><th>Điện thoại</th><td>${order.phone}</td></tr>
          <tr><th>Địa chỉ</th><td>${order.address}</td></tr>
          <tr><th>Ghi chú</th><td>${order.note}</td></tr>
          <tr><th>Mã giao dịch</th><td>${order.MaGiaoDich}</td></tr>
          <tr><th>Trạng thái đơn</th><td>${order.Ttdon}</td></tr>
          <tr><th>Tỉnh/TP</th><td>${diaChiGoc}</td></tr>
          <tr><th>Sản phẩm</th><td>${productList}</td></tr>
          <tr><th>Thời gian đặt</th><td>${order.TimeDatHang}</td></tr>
          <tr><th>Thời gian giao</th><td>${order.TimeNhanHang}</td></tr>
        `;
        listDiv.appendChild(table);
      });
    })
    .catch(err => {
      console.error("Lỗi khi lấy đơn hàng:", err);
      document.getElementById("DonHangList").innerHTML = "<p style='color:red;'>Không thể tải đơn hàng!</p>";
    });
}
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("toggleDonHang");
  const btn1 = document.getElementById("toggleGiaoDich");
  const btn2 = document.getElementById("toggleLienHe");
  const btn3 = document.getElementById("toggleFeedBack");
  const btn4 = document.getElementById("toggleBaiViet");

  const donHangDiv = document.getElementById("donHangContainer");
  const giaoDichDiv = document.getElementById("GiaoDichContainer");
  const lienHeDiv = document.getElementById("LienHeContainer");
  const feedBackDiv = document.getElementById("FeedBackContainer");
  const baiVietDiv = document.getElementById("BaiVietContainer");

  btn.addEventListener("click", () => {
    toggleDiv(donHangDiv, btn, "Xem đơn hàng", "Ẩn đơn hàng");
  });

  btn1.addEventListener("click", () => {
    toggleDiv(giaoDichDiv, btn1, "Xem giao dịch", "Ẩn giao dịch");
  });

  btn2.addEventListener("click", () => {
    toggleDiv(lienHeDiv, btn2, "Xem liên hệ", "Ẩn liên hệ");
  });

  btn3.addEventListener("click", () => {
    toggleDiv(feedBackDiv, btn3, "Xem phản hồi", "Ẩn phản hồi");
  });

  btn4.addEventListener("click", () => {
    toggleDiv(baiVietDiv, btn4, "Xem bài viết", "Ẩn bài viết");
  });

  function toggleDiv(div, button, textShow, textHide) {
    if (div.style.display === "none" || div.style.display === "") {
      div.style.display = "block";
      button.textContent = textHide;
    } else {
      div.style.display = "none";
      button.textContent = textShow;
    }
  }
});
document.addEventListener("DOMContentLoaded", function () {
  // Ẩn tất cả section, chỉ hiện section đầu tiên
  document.querySelectorAll('.admin-section-content').forEach((sec, idx) => {
    sec.classList.toggle('active', idx === 0);
    if (idx === 0) sec.style.opacity = 1;
    else sec.style.opacity = 0;
  });

  document.querySelectorAll('.admin-sidebar li').forEach(li => {
    li.addEventListener('click', function () {
      // Đổi active menu
      document.querySelectorAll('.admin-sidebar li').forEach(x => x.classList.remove('active'));
      this.classList.add('active');
      // Ẩn/hiện section với hiệu ứng
      const sectionId = this.getAttribute('data-section');
      document.querySelectorAll('.admin-section-content').forEach(sec => {
        if (sec.id === sectionId) {
          sec.classList.add('active');
          sec.style.transition = 'opacity 0.4s';
          sec.style.opacity = 1;
        } else {
          sec.classList.remove('active');
          sec.style.transition = 'opacity 0.4s';
          sec.style.opacity = 0;
        }
      });
    });
  });
});
document.addEventListener("DOMContentLoaded", function () {
  const sidebar = document.getElementById('adminSidebar');
  const toggleBtn = document.getElementById('sidebarToggle');

  toggleBtn.addEventListener('click', function () {
    sidebar.classList.toggle('collapsed');
  });
});
document.addEventListener("DOMContentLoaded", function() {
  const fileInput = document.getElementById('image');
  const fileLabelText = document.getElementById('fileLabelText');
  if (fileInput && fileLabelText) {
    fileInput.addEventListener('change', function() {
      fileLabelText.textContent = this.files && this.files.length > 0 ? this.files[0].name : 'Chọn tệp';
    });
  }
});
</script>
         <script src="JS/index.js"></script>
         <script>
document.addEventListener("DOMContentLoaded", function() {
  // ...code chuyển section menu...
  // Voucher tab
  const voucherBtns = document.querySelectorAll('.voucher-tab-btn');
  const voucherTabs = document.querySelectorAll('.voucher-tab-content');
  voucherBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      voucherBtns.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      voucherTabs.forEach(tab => {
        tab.style.display = tab.id === 'voucherTab' + this.dataset.voucherTab.charAt(0).toUpperCase() + this.dataset.voucherTab.slice(1)
          ? 'block' : 'none';
      });
    });
  });
  // Mặc định chọn tab đầu tiên
  if (voucherBtns.length) voucherBtns[0].classList.add('active');
});
</script>
